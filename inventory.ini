# Ansible Inventory Configuration
# Supports multiple environments and server groups

# Development servers
[dev]
dev-server ansible_host=192.168.88.2

# Production servers (examples)
[prod]
# prod-web-01 ansible_host=10.0.1.10
# prod-web-02 ansible_host=10.0.1.11
# prod-db-01 ansible_host=10.0.2.10

# Staging servers
[staging]
# staging-01 ansible_host=10.0.3.10

# All servers group
[servers:children]
dev
prod
staging

# Connection variables for all servers
[servers:vars]
# Authentication
ansible_user={{ lookup('env', 'ANSIBLE_USER') | default('ansible', true) }}
ansible_password={{ lookup('env', 'ANSIBLE_PASSWORD') }}
ansible_become_password={{ lookup('env', 'ANSIBLE_PASSWORD') }}

# Connection settings
ansible_port={{ lookup('env', 'ANSIBLE_SSH_PORT') | default('22', true) }}
ansible_connection=ssh
ansible_ssh_common_args='-o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null'

# Python interpreter (let Ansible auto-discover)
ansible_python_interpreter=auto_silent

# Performance tuning
ansible_ssh_pipelining=True
ansible_ssh_extra_args='-o ControlMaster=auto -o ControlPersist=60s'

# Development-specific variables
[dev:vars]
env_name=development
enable_debug=true
auto_reboot_allowed=false

# Production-specific variables
[prod:vars]
env_name=production
enable_debug=false
auto_reboot_allowed=false
backup_enabled=true

# Staging-specific variables
[staging:vars]
env_name=staging
enable_debug=true
auto_reboot_allowed=true

# Web servers group
[webservers]
# prod-web-01
# prod-web-02

[webservers:vars]
nginx_worker_processes=auto
nginx_worker_connections=1024

# Database servers group
[databases]
# prod-db-01

[databases:vars]
mysql_max_connections=500
backup_schedule="0 2 * * *"

# Group for servers needing special SSH config
[ssh_custom]
# server-with-custom-port ansible_host=192.168.88.100 ansible_port=2222

# Group for servers using SSH key authentication
[ssh_key_auth]
# secure-server ansible_host=192.168.88.50 ansible_ssh_private_key_file=~/.ssh/secure_key

[ssh_key_auth:vars]
ansible_password=
ansible_become_password={{ lookup('env', 'ANSIBLE_BECOME_PASSWORD') }}
ansible_ssh_private_key_file={{ lookup('env', 'ANSIBLE_SSH_KEY') | default('~/.ssh/id_rsa', true) }}
